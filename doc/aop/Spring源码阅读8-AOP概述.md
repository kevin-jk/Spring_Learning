# 什么是AOP

AOP 即Aspect-Oriented Programming. 面向切面编程。其主要原理是将一些关注点从业务逻辑中剥离出来，从而进行解耦，降低维护成本，提高开发效率。

AOP的应用场景

- 日志
- 事务
- 权限

AOP的相关概念

1. **增强（Advice**)

   增强也叫做通知，就是我们需要做的事情，功能。如上面提到的日志，事务等。

2. **连接点(Joinpoint)**

   连接点就是程序执行的某个特定的位置，如：类开始初始化前、类初始化后、类的某个方法调用前、类的某个方法调用后、方法抛出异常后等。Spring 只支持类的方法前、后、抛出异常后的连接点。

3. **切点（Pointcut） **

   切点，我的理解就是确切的连接点，在哪些连接点上进行增强。

4. **切面(Aspect)**

   切面由切点和增强(或引介)组成，或者只由增强（或引介）实现。

5. **目标对象（Target）**

   目标对象就是我们需要对它进行增强的业务类，也就是原有的功能。

6. **AOP代理(AOP proxy)**

   一个类被AOP织入后生成出了一个结果类，它是融合了原类和增强逻辑的代理类

7. **织入(Weaving)**

   织入就是将增强添加到目标类具体连接点上的过程。

   - 编译期织入，这要求使用特殊java编译器
   - 类装载期织入，这要求使用特殊的类装载器
   - 动态代理织入，在运行期为目标类添加增强生成子类的方式

    Spring采用的是动态代理织入，而AspectJ采用编译期织入和类装载期织入。

上面的概念，其实我看过很多次，但是都不能记住，也没有必要去记忆。 我们需要理解的是AOP从实现的角度去理解的话，就是解决了 **在哪儿做什么**的问题。对Spring而言，该问题对应着如下的设计： 

在哪儿： 对应着切点，pointCut

做什么： 对应增强(通知), advice 

在哪儿做什么： 就是aop, 对应着advisor通知器

# Spring AOP

## 增强 advice

1. 前置通知（Before）:在目标方法或者说连接点被调用前执行的通知；
2. 后置通知（After）：指在某个连接点完成后执行的通知；
3. 返回通知（After-returning）：指在某个连接点成功执行之后执行的通知；
4. 异常通知（After-throwing）：指在方法抛出异常后执行的通知；
5. 环绕通知（Around）：指包围一个连接点通知，在被通知的方法调用之前和之后执行自定义的方法。

## PointCut切点

切点决定了Advice通知应该作用域哪个连接点，其定义了需要增强的方法集合。

## Advisor通知器

Advisor将Advice和pointCut连接起来，在Spring中，DefaultPointcutAdvisor是默认的实现。



参考文献

<https://www.cnblogs.com/GIRLANDBOYS/p/7637673.html>